"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LList = void 0;
class Node {
    constructor(value, next) {
        this.value = value;
        this.next = next || null;
    }
}
class LList {
    constructor(input) {
        if (input && Array.isArray(input)) {
            for (let i = 0; i < input.length; i++) {
                this.add(input[i]);
            }
        }
        else if (input && typeof input === 'number') {
            for (let i = 0; i < input; i++) {
                this.add(0);
            }
        }
        else if (!input) {
            this.root = null;
            this.tail = null;
            this.size = 0;
        }
        else {
            throw new Error('Invalid input data');
        }
    }
    add(item) {
        const node = new Node(item, null);
        if (this.tail) {
            this.tail.next = node;
        }
        if (!this.root) {
            this.root = node;
        }
        this.tail = node;
        this.size++;
    }
    clear() {
        this.root = null;
        this.tail = null;
    }
    contains(item) {
        return false;
    }
    get(idx) {
        if (this.root === null) {
            return;
        }
        let node = this.root;
        let index = 0;
        while (node) {
            if (index === idx) {
                return node.value;
            }
            node = node.next;
            index++;
        }
    }
    getSize() {
        let count = 0;
        let current = this.root;
        while (current) {
            count++;
            current = current.next;
        }
        return count;
    }
    halfReverse() {
        let arr = this.toArray();
        if (arr.length < 1) {
            return;
        }
        const half = Number((arr.length / 2).toFixed(0));
        let res = [];
        for (let i = half - 1; i < this.size; i++) {
            res[res.length] = arr[i];
        }
        for (let i = 0; i < half - 1; i++) {
            res[res.length] = arr[i];
        }
        this.clear();
        for (let i = 0; i < res.length; i++) {
            this.add(res[i]);
        }
    }
    maxIndex() {
        let max = this.root.value;
        let current = this.root;
        let counter = 0;
        let indx = 0;
        while (current) {
            if (max < current.value) {
                max = current.value;
                indx = counter;
            }
            counter++;
            current = current.next;
        }
        return indx;
    }
    maxValue() {
        let max = this.root.value;
        let current = this.root;
        while (current) {
            if (max < current.value) {
                max = current.value;
            }
            current = current.next;
        }
        return max;
    }
    minIndex() {
        let min = this.root.value;
        let current = this.root;
        let counter = 0;
        let indx = 0;
        while (current) {
            if (min > current.value) {
                min = current.value;
                indx = counter;
            }
            counter++;
            current = current.next;
        }
        return indx;
    }
    minValue() {
        let min = this.root.value;
        let current = this.root;
        while (current) {
            if (min > current.value) {
                min = current.value;
            }
            current = current.next;
        }
        return min;
    }
    print() {
        let current = this.root;
        for (let i = 0; i < this.size; i++) {
            console.log(current.value);
            current = current.next;
        }
    }
    remove(value) {
        let counter = 0;
        let current = this.root;
        let prev = null;
        while (counter < this.size) {
            if (current.value === value) {
                const result = current.value;
                if (current.next !== null) {
                    current.value = current.next.value;
                    current.next = current.next.next;
                }
                else {
                    if (prev !== null) {
                        prev.next = null;
                        this.tail = prev;
                    }
                    else {
                        this.root = null;
                        this.tail = null;
                    }
                }
                this.size--;
                if (this.size === 1) {
                    this.tail = null;
                }
                return result;
            }
            else {
                counter++;
                prev = current;
                current = current.next;
            }
        }
    }
    removeAll(items) {
        let current = this.root;
        let prev = null;
        while (current) {
            if (items.includes(current.value)) {
                if (current.next !== null) {
                    current.value = current.next.value;
                    current.next = current.next.next;
                }
                else {
                    if (prev === null) {
                        this.root = null;
                        this.tail = null;
                        current = null;
                    }
                    if (prev !== null) {
                        prev.next = null;
                        current = prev;
                    }
                }
            }
            else {
                prev = current;
                current = current.next;
            }
        }
        this.size = this.getSize();
        if (this.size === 1) {
            this.tail = null;
        }
    }
    retainAll(items) {
    }
    reverse() {
        let arr = this.toArray();
        if (arr.length < 1) {
            return;
        }
        this.clear();
        let result = [];
        for (let i = arr.length - 1; i >= 0; i--) {
            result[arr.length - 1 - i] = arr[i];
        }
        for (let i = 0; i < result.length; i++) {
            this.add(result[i]);
        }
    }
    set(item, idx) {
        if (this.root === null) {
            return;
        }
        let node = this.root;
        let index = 0;
        while (node) {
            if (index === idx) {
                node.value = item;
                return;
            }
            node = node.next;
            index++;
        }
    }
    sort() {
        return [];
    }
    toArray() {
        let arr = [];
        let current = this.root;
        while (current) {
            arr[arr.length] = current.value;
            current = current.next;
        }
        return arr;
    }
    toString() {
        let str = '';
        let current = this.root;
        while (current) {
            str = str + ' ' + current.value;
            current = current.next;
        }
        return str;
    }
}
exports.LList = LList;
const test1 = new LList([2, 5, 6]);
test1.add(1);
console.log(test1.toArray());
test1.add(2);
console.log(test1.toArray());
module.exports = { LList };

//# sourceMappingURL=data:application/json;charset=utf8;base64,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O0FBQ2pDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDYixPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFBO0FBQzVCLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDYixPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFBO0FBRTVCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsRUFBQyxLQUFLLEVBQUMsQ0FBQyIsImZpbGUiOiJMTGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SUxpc3R9IGZyb20gXCIuL3R5cGVzXCI7XHJcblxyXG5jbGFzcyBOb2RlIHtcclxuICAgIHZhbHVlOiBudW1iZXI7XHJcbiAgICBuZXh0OiBOb2RlO1xyXG4gICAgY29uc3RydWN0b3IodmFsdWU6IG51bWJlciwgbmV4dD86IE5vZGUpIHtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWVcclxuICAgICAgICB0aGlzLm5leHQgPSBuZXh0IHx8IG51bGxcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExMaXN0IGltcGxlbWVudHMgSUxpc3Qge1xyXG4gICAgcHJpdmF0ZSByb290OiBOb2RlIHwgbnVsbDtcclxuICAgIHByaXZhdGUgc2l6ZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0YWlsOiBOb2RlIHwgbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpbnB1dD8pXHJcbiAgIHtcclxuXHJcbiAgICAgICAgaWYgKGlucHV0ICYmIEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGlucHV0W2ldKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dCAmJiB0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoMClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoIWlucHV0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMudGFpbCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZSA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IGRhdGEnKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhZGQoaXRlbSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBuZXcgTm9kZShpdGVtLCBudWxsKVxyXG5cclxuICAgICAgICBpZiAodGhpcy50YWlsKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFpbC5uZXh0ID0gbm9kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5yb290KSB7XHJcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IG5vZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRhaWwgPSBub2RlO1xyXG4gICAgICAgIHRoaXMuc2l6ZSsrXHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yb290ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRhaWwgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnRhaW5zKGl0ZW0pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0KGlkeCk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKHRoaXMucm9vdCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBub2RlID0gdGhpcy5yb290O1xyXG4gICAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgICAgd2hpbGUgKG5vZGUpe1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IGlkeCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbm9kZSA9IG5vZGUubmV4dDtcclxuICAgICAgICAgICAgaW5kZXgrK1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRTaXplKCk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gMDsgXHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnJvb3Q7XHJcblxyXG4gICAgICAgIHdoaWxlKGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgY291bnQrK1xyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb3VudDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaGFsZlJldmVyc2UoKTogdm9pZCB7XHJcbiAgICAgICAgIGxldCBhcnIgPSB0aGlzLnRvQXJyYXkoKVxyXG5cclxuICAgICAgICBpZiAoYXJyLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBoYWxmID0gTnVtYmVyKChhcnIubGVuZ3RoIC8gMikudG9GaXhlZCgwKSk7XHJcbiAgICAgICAgbGV0IHJlcyA9IFtdXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGhhbGYgLSAxOyBpIDwgdGhpcy5zaXplOyBpKyspIHtcclxuICAgICAgICAgICAgcmVzW3Jlcy5sZW5ndGhdID0gYXJyW2ldXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGFsZiAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICByZXNbcmVzLmxlbmd0aF0gPSBhcnJbaV1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jbGVhcigpXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkKHJlc1tpXSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG1heEluZGV4KCk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IG1heCA9IHRoaXMucm9vdC52YWx1ZTsgXHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnJvb3Q7IFxyXG4gICAgICAgIGxldCBjb3VudGVyID0gMDtcclxuICAgICAgICBsZXQgaW5keCA9IDA7IFxyXG5cclxuICAgICAgICB3aGlsZSAoY3VycmVudCkge1xyXG4gICAgICAgICAgICBpZiAobWF4IDwgY3VycmVudC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgbWF4ID0gY3VycmVudC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGluZHggPSBjb3VudGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvdW50ZXIrKztcclxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubmV4dDsgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbmR4O1xyXG4gICAgfVxyXG5cclxuICAgIG1heFZhbHVlKCk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IG1heCA9IHRoaXMucm9vdC52YWx1ZTsgXHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnJvb3Q7IFxyXG4gICAgICAgIFxyXG4gICAgICAgICB3aGlsZSAoY3VycmVudCkge1xyXG4gICAgICAgICAgICBpZiAobWF4IDwgY3VycmVudC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgbWF4ID0gY3VycmVudC52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0OyBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtYXg7XHJcbiAgICB9XHJcblxyXG4gICAgbWluSW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgbWluID0gdGhpcy5yb290LnZhbHVlOyBcclxuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMucm9vdDsgXHJcbiAgICAgICAgbGV0IGNvdW50ZXIgPSAwO1xyXG4gICAgICAgIGxldCBpbmR4ID0gMDsgXHJcblxyXG4gICAgICAgIHdoaWxlIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChtaW4gPiBjdXJyZW50LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBtaW4gPSBjdXJyZW50LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaW5keCA9IGNvdW50ZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY291bnRlcisrO1xyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0OyBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpbmR4O1xyXG4gICAgfVxyXG5cclxuICAgIG1pblZhbHVlKCk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IG1pbiA9IHRoaXMucm9vdC52YWx1ZTsgXHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnJvb3Q7IFxyXG4gICAgICAgIFxyXG4gICAgICAgICB3aGlsZSAoY3VycmVudCkge1xyXG4gICAgICAgICAgICBpZiAobWluID4gY3VycmVudC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgbWluID0gY3VycmVudC52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0OyBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtaW47XHJcbiAgICB9XHJcblxyXG4gICAgcHJpbnQoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnJvb3Q7IFxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSsrKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coY3VycmVudC52YWx1ZSk7IFxyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUodmFsdWUpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBjb3VudGVyID0gMDtcclxuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMucm9vdDtcclxuICAgICAgICBsZXQgcHJldiA9IG51bGw7XHJcblxyXG4gICAgICAgIHdoaWxlKGNvdW50ZXIgPCB0aGlzLnNpemUpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50LnZhbHVlID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY3VycmVudC52YWx1ZVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Lm5leHQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50LnZhbHVlID0gY3VycmVudC5uZXh0LnZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudC5uZXh0ID0gY3VycmVudC5uZXh0Lm5leHRcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXYubmV4dCA9IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YWlsID0gcHJldlxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9vdCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFpbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaXplLS1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpemUgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhaWwgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY291bnRlcisrXHJcbiAgICAgICAgICAgICAgICBwcmV2ID0gY3VycmVudDtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVBbGwoaXRlbXM6IG51bWJlcltdKTogdm9pZCB7XHJcbiAgICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5yb290O1xyXG4gICAgICAgIGxldCBwcmV2ID0gbnVsbDtcclxuXHJcbiAgICAgICAgd2hpbGUoY3VycmVudCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW1zLmluY2x1ZGVzKGN1cnJlbnQudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5uZXh0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudC52YWx1ZSA9IGN1cnJlbnQubmV4dC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Lm5leHQgPSBjdXJyZW50Lm5leHQubmV4dFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3QgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhaWwgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXYubmV4dCA9IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IHByZXZcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2ID0gY3VycmVudFxyXG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubmV4dFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNpemUgPT09IDEpIHtcclxuICAgICAgICAgICAgdGhpcy50YWlsID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0YWluQWxsKGl0ZW1zOiBudW1iZXJbXSk6IHZvaWQge1xyXG4gICAgfVxyXG5cclxuICAgIHJldmVyc2UoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGFyciA9IHRoaXMudG9BcnJheSgpXHJcblxyXG4gICAgICAgIGlmIChhcnIubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2xlYXIoKVxyXG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gYXJyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFthcnIubGVuZ3RoIC0gMSAtIGldID0gYXJyW2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmFkZChyZXN1bHRbaV0pXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICB9XHJcblxyXG4gICAgc2V0KGl0ZW0sIGlkeCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnJvb3QgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbm9kZSA9IHRoaXMucm9vdDtcclxuICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgICAgIHdoaWxlIChub2RlKXtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSBpZHgpIHtcclxuICAgICAgICAgICAgICAgICBub2RlLnZhbHVlID0gaXRlbTtcclxuICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbm9kZSA9IG5vZGUubmV4dDtcclxuICAgICAgICAgICAgaW5kZXgrK1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzb3J0KCk6IG51bWJlcltdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgdG9BcnJheSgpOiBudW1iZXJbXSB7XHJcbiAgICAgICAgbGV0IGFyciA9IFtdOyBcclxuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMucm9vdDsgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICB3aGlsZSAoY3VycmVudCkge1xyXG4gICAgICAgICAgICBhcnJbYXJyLmxlbmd0aF0gPSBjdXJyZW50LnZhbHVlO1xyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0OyBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9XHJcblxyXG4gICAgdG9TdHJpbmcoKTogc3RyaW5ne1xyXG4gICAgICAgIGxldCBzdHIgPSAnJzsgXHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLnJvb3Q7IFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgc3RyID0gc3RyICsgJyAnICsgY3VycmVudC52YWx1ZTtcclxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubmV4dDsgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBzdHI7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jb25zdCB0ZXN0MSA9IG5ldyBMTGlzdChbMiw1LDZdKTtcclxudGVzdDEuYWRkKDEpOyBcclxuY29uc29sZS5sb2codGVzdDEudG9BcnJheSgpKVxyXG50ZXN0MS5hZGQoMik7IFxyXG5jb25zb2xlLmxvZyh0ZXN0MS50b0FycmF5KCkpXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtMTGlzdH07XHJcbiJdLCJzb3VyY2VSb290IjoiLi4ifQ==
